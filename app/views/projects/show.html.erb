<% content_for :page_title, @project.name %>

<% content_for :page_actions do %>
  <%= link_to edit_project_path(@project),
      class: "inline-flex items-center px-4 py-2 rounded-xl font-medium transition-all duration-200 hover:bg-white/10",
      style: "border: 1px solid var(--color-graphite); color: var(--color-snow);" do %>
    <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"/>
    </svg>
    Редактировать
  <% end %>
<% end %>

<div class="space-y-8">
  <!-- Информация о проекте -->
  <div class="glass-card rounded-2xl p-6" style="border: 1px solid var(--color-graphite);">
    <div class="flex items-center gap-4 mb-4">
      <div class="w-12 h-12 rounded-xl flex items-center justify-center"
           style="background: <%= hex_to_rgba(@project.display_color, 0.12) %>;">
        <div class="w-4 h-4 rounded-full" style="background: <%= @project.display_color %>;"></div>
      </div>
      <div>
        <h2 class="text-xl font-semibold" style="color: var(--color-snow);"><%= @project.name %></h2>
        <% if @project.description.present? %>
          <p class="text-sm" style="color: var(--color-mist);"><%= @project.description %></p>
        <% end %>
      </div>
    </div>
  </div>

  <!-- Транскрибации -->
  <% if @transcriptions.any? %>
    <div>
      <h3 class="text-lg font-semibold mb-4 flex items-center gap-2" style="color: var(--color-snow);">
        <svg class="w-5 h-5" style="color: var(--color-neon-blue);" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11a7 7 0 01-7 7m0 0a7 7 0 01-7-7m7 7v4m0 0H8m4 0h4m-4-8a3 3 0 01-3-3V5a3 3 0 116 0v6a3 3 0 01-3 3z"/>
        </svg>
        Транскрибации
      </h3>
      <div class="space-y-3">
        <% @transcriptions.each do |transcription| %>
          <%= link_to transcription_path(transcription), class: "block glass-card rounded-xl p-4 hover:bg-white/5 transition-all", style: "border: 1px solid var(--color-graphite);" do %>
            <div class="flex items-center justify-between">
              <span style="color: var(--color-snow);"><%= transcription.display_title %></span>
              <%= render "transcriptions/status_badge", transcription: transcription %>
            </div>
          <% end %>
        <% end %>
      </div>
    </div>
  <% end %>

  <!-- Озвучки -->
  <% if @voice_generations.any? %>
    <div>
      <h3 class="text-lg font-semibold mb-4 flex items-center gap-2" style="color: var(--color-snow);">
        <svg class="w-5 h-5" style="color: var(--color-neon-purple);" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15.536 8.464a5 5 0 010 7.072m2.828-9.9a9 9 0 010 12.728M5.586 15H4a1 1 0 01-1-1v-4a1 1 0 011-1h1.586l4.707-4.707C10.923 3.663 12 4.109 12 5v14c0 .891-1.077 1.337-1.707.707L5.586 15z"/>
        </svg>
        Озвучки
      </h3>
      <div class="space-y-3">
        <% @voice_generations.each do |vg| %>
          <%= link_to voice_generation_path(vg), class: "block glass-card rounded-xl p-4 hover:bg-white/5 transition-all", style: "border: 1px solid var(--color-graphite);" do %>
            <div class="flex items-center justify-between">
              <span style="color: var(--color-snow);"><%= vg.text_preview(50) %></span>
              <%= render "voice_generations/status_badge", voice_generation: vg %>
            </div>
          <% end %>
        <% end %>
      </div>
    </div>
  <% end %>

  <!-- Переводы -->
  <% if @translations.any? %>
    <div>
      <h3 class="text-lg font-semibold mb-4 flex items-center gap-2" style="color: var(--color-snow);">
        <svg class="w-5 h-5" style="color: var(--color-neon-green);" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5h12M9 3v2m1.048 9.5A18.022 18.022 0 016.412 9m6.088 9h7M11 21l5-10 5 10M12.751 5C11.783 10.77 8.07 15.61 3 18.129"/>
        </svg>
        Переводы
      </h3>
      <div class="space-y-3">
        <% @translations.each do |translation| %>
          <%= link_to translation_path(translation), class: "block glass-card rounded-xl p-4 hover:bg-white/5 transition-all", style: "border: 1px solid var(--color-graphite);" do %>
            <div class="flex items-center justify-between">
              <span style="color: var(--color-snow);"><%= translation.text_preview(50) %></span>
              <%= render "translations/status_badge", translation: translation %>
            </div>
          <% end %>
        <% end %>
      </div>
    </div>
  <% end %>

  <!-- Видео-билдер -->
  <% if @video_builders.any? %>
    <div>
      <h3 class="text-lg font-semibold mb-4 flex items-center gap-2" style="color: var(--color-snow);">
        <svg class="w-5 h-5" style="color: var(--color-coral);" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"/>
        </svg>
        Видео
      </h3>
      <div class="space-y-3">
        <% @video_builders.each do |vb| %>
          <%= link_to video_builder_path(vb), class: "block glass-card rounded-xl p-4 hover:bg-white/5 transition-all", style: "border: 1px solid var(--color-graphite);" do %>
            <div class="flex items-center justify-between">
              <span style="color: var(--color-snow);"><%= vb.display_title %></span>
              <%= render "video_builders/status_badge", video_builder: vb %>
            </div>
          <% end %>
        <% end %>
      </div>
    </div>
  <% end %>

  <!-- Пустое состояние -->
  <% if @transcriptions.empty? && @voice_generations.empty? && @translations.empty? && @video_builders.empty? %>
    <div class="text-center py-12">
      <div class="w-16 h-16 mx-auto mb-4 rounded-2xl flex items-center justify-center"
           style="background: var(--color-graphite);">
        <svg class="w-8 h-8" style="color: var(--color-mist);" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"/>
        </svg>
      </div>
      <h3 class="text-lg font-semibold mb-2" style="color: var(--color-snow);">Проект пуст</h3>
      <p class="text-sm mb-6" style="color: var(--color-mist);">Добавьте материалы в этот проект при их создании</p>
    </div>
  <% end %>

  <!-- Удаление -->
  <div class="text-center pt-8" style="border-top: 1px solid var(--color-graphite);">
    <%= button_to project_path(@project), method: :delete,
        data: { turbo_confirm: "Удалить проект \"#{@project.name}\"?" },
        class: "inline-flex items-center px-4 py-2 rounded-xl font-medium transition-all duration-200 hover:bg-red-500/20",
        style: "color: var(--color-coral); border: 1px solid var(--color-coral);" do %>
      <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"/>
      </svg>
      Удалить проект
    <% end %>
  </div>
</div>
