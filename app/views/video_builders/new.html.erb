<% content_for :page_title, "Создать видео" %>

<div class="max-w-4xl mx-auto">
  <div class="glass-card rounded-2xl overflow-hidden" style="border: 1px solid var(--color-graphite);">
    <!-- Header -->
    <div class="p-5 md:p-6 border-b" style="border-color: var(--color-graphite); background: linear-gradient(135deg, rgba(255, 107, 107, 0.08) 0%, transparent 100%);">
      <div class="flex items-center gap-4">
        <div class="w-12 h-12 rounded-xl flex items-center justify-center"
             style="background: rgba(255, 107, 107, 0.15); border: 1px solid rgba(255, 107, 107, 0.2);">
          <svg class="w-6 h-6" style="color: var(--color-coral);" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"/>
          </svg>
        </div>
        <div>
          <h1 class="font-display text-xl md:text-2xl font-bold" style="color: var(--color-snow);">Создание видео</h1>
          <p class="text-sm" style="color: var(--color-mist);">Объедините озвучку с видео</p>
        </div>
      </div>
    </div>

    <%= form_with model: @video_builder, class: "p-5 md:p-6 space-y-6", data: { controller: "video-builder-form" } do |f| %>

      <% if @video_builder.errors.any? %>
        <div class="rounded-xl p-4 border-l-4" style="background: rgba(255, 107, 107, 0.1); border-left-color: var(--color-coral);">
          <div class="flex items-start">
            <svg class="w-5 h-5 mr-3 flex-shrink-0 mt-0.5" style="color: var(--color-coral);" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
            </svg>
            <div>
              <p class="font-medium" style="color: var(--color-coral);">Ошибки:</p>
              <ul class="mt-1 text-sm list-disc list-inside" style="color: var(--color-mist);">
                <% @video_builder.errors.full_messages.each do |message| %>
                  <li><%= message %></li>
                <% end %>
              </ul>
            </div>
          </div>
        </div>
      <% end %>

      <!-- Шаг 1: Основная информация -->
      <div class="space-y-5">
        <div class="flex items-center gap-3 pb-4 border-b" style="border-color: var(--color-graphite);">
          <span class="w-9 h-9 rounded-lg flex items-center justify-center text-sm font-bold"
                style="background: linear-gradient(135deg, var(--color-coral) 0%, #ff8c8c 100%); color: var(--color-void);">1</span>
          <div>
            <h3 class="font-display text-base font-semibold" style="color: var(--color-snow);">Основная информация</h3>
            <p class="text-xs" style="color: var(--color-mist);">Название и проект</p>
          </div>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
          <div>
            <%= f.label :title, "Название видео", class: "block text-sm font-medium mb-2", style: "color: var(--color-cloud);" %>
            <div class="relative">
              <div class="absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none">
                <svg class="w-5 h-5" style="color: var(--color-mist);" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 4v16M17 4v16M3 8h4m10 0h4M3 12h18M3 16h4m10 0h4M4 20h16a1 1 0 001-1V5a1 1 0 00-1-1H4a1 1 0 00-1 1v14a1 1 0 001 1z"/>
                </svg>
              </div>
              <%= f.text_field :title,
                  class: "w-full pl-12 pr-4 py-3 rounded-xl transition-all duration-200 focus:outline-none focus:ring-2",
                  style: "background: var(--color-obsidian); border: 1px solid var(--color-graphite); color: var(--color-snow); --tw-ring-color: var(--color-coral);",
                  placeholder: "Мой крутой ролик" %>
            </div>
          </div>

          <% if @projects.any? %>
            <div>
              <%= f.label :project_id, "Проект", class: "block text-sm font-medium mb-2", style: "color: var(--color-cloud);" %>
              <div class="relative">
                <div class="absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none">
                  <svg class="w-5 h-5" style="color: var(--color-mist);" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"/>
                  </svg>
                </div>
                <%= f.select :project_id,
                    options_from_collection_for_select(@projects, :id, :name, @video_builder.project_id),
                    { include_blank: "Без проекта" },
                    { class: "w-full pl-12 pr-10 py-3 rounded-xl appearance-none cursor-pointer transition-all duration-200 focus:outline-none focus:ring-2",
                      style: "background: var(--color-obsidian); border: 1px solid var(--color-graphite); color: var(--color-snow); --tw-ring-color: var(--color-coral);" } %>
                <div class="absolute inset-y-0 right-0 pr-4 flex items-center pointer-events-none">
                  <svg class="w-5 h-5" style="color: var(--color-mist);" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/>
                  </svg>
                </div>
              </div>
            </div>
          <% end %>
        </div>
      </div>

      <!-- Шаг 2: Аудио -->
      <div class="space-y-5">
        <div class="flex items-center gap-3 pb-4 border-b" style="border-color: var(--color-graphite);">
          <span class="w-9 h-9 rounded-lg flex items-center justify-center text-sm font-bold"
                style="background: linear-gradient(135deg, var(--color-neon-purple) 0%, #b47fff 100%); color: white;">2</span>
          <div>
            <h3 class="font-display text-base font-semibold" style="color: var(--color-snow);">Выберите аудио</h3>
            <p class="text-xs" style="color: var(--color-mist);">Из озвучек или загрузите файл</p>
          </div>
        </div>

        <% if @voice_generations.any? %>
          <div class="rounded-xl p-4" style="background: var(--color-obsidian); border: 1px solid var(--color-graphite);">
            <label class="flex items-center gap-2 text-sm font-medium mb-3" style="color: var(--color-cloud);">
              <svg class="w-5 h-5" style="color: var(--color-neon-purple);" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15.536 8.464a5 5 0 010 7.072m2.828-9.9a9 9 0 010 12.728M5.586 15H4a1 1 0 01-1-1v-4a1 1 0 011-1h1.586l4.707-4.707C10.923 3.663 12 4.109 12 5v14c0 .891-1.077 1.337-1.707.707L5.586 15z"/>
              </svg>
              Ваши озвучки
            </label>
            <div class="space-y-2 max-h-56 overflow-y-auto pr-2 custom-scrollbar">
              <% @voice_generations.each do |vg| %>
                <label class="group flex items-center gap-4 p-3 rounded-xl cursor-pointer transition-all duration-200 hover:bg-white/5"
                       style="border: 1px solid var(--color-graphite);">
                  <div class="relative">
                    <input type="checkbox" name="video_builder[voice_generation_ids][]" value="<%= vg.id %>"
                           class="peer sr-only">
                    <div class="w-5 h-5 rounded-md border-2 flex items-center justify-center transition-all duration-200 peer-checked:border-[var(--color-neon-purple)] peer-checked:bg-[var(--color-neon-purple)]"
                         style="border-color: var(--color-graphite);">
                      <svg class="w-3 h-3 text-white opacity-0 peer-checked:opacity-100 transition-opacity" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M5 13l4 4L19 7"/>
                      </svg>
                    </div>
                  </div>
                  <div class="flex-1 min-w-0">
                    <p class="truncate font-medium text-sm" style="color: var(--color-snow);"><%= vg.text_preview(60) %></p>
                    <p class="text-xs" style="color: var(--color-mist);">
                      <%= vg.provider_display_name %> &middot; <%= time_ago_in_words(vg.created_at) %> назад
                    </p>
                  </div>
                  <span class="px-2 py-1 rounded-lg text-xs font-medium" style="background: rgba(168, 85, 247, 0.1); color: var(--color-neon-purple);">
                    <%= vg.voice_name || 'Голос' %>
                  </span>
                </label>
              <% end %>
            </div>
          </div>
        <% end %>

        <!-- Текст для новой озвучки -->
        <% if @transcriptions.any? || @translations.any? %>
          <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
            <% if @transcriptions.any? %>
              <div class="rounded-xl p-4" style="background: var(--color-obsidian); border: 1px solid var(--color-graphite);">
                <label class="flex items-center gap-2 text-sm font-medium mb-3" style="color: var(--color-cloud);">
                  <svg class="w-5 h-5" style="color: var(--color-neon-blue);" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11a7 7 0 01-7 7m0 0a7 7 0 01-7-7m7 7v4m0 0H8m4 0h4m-4-8a3 3 0 01-3-3V5a3 3 0 116 0v6a3 3 0 01-3 3z"/>
                  </svg>
                  Из транскрибации
                </label>
                <div class="space-y-2 max-h-40 overflow-y-auto pr-2 custom-scrollbar">
                  <% @transcriptions.each do |t| %>
                    <label class="group flex items-center gap-3 p-3 rounded-lg cursor-pointer transition-all duration-200 hover:bg-white/5"
                           style="border: 1px solid transparent;">
                      <input type="radio" name="video_builder[text_source]" value="transcription_<%= t.id %>"
                             class="sr-only peer">
                      <div class="w-4 h-4 rounded-full border-2 flex items-center justify-center transition-all duration-200 peer-checked:border-[var(--color-neon-blue)]"
                           style="border-color: var(--color-graphite);">
                        <div class="w-2 h-2 rounded-full transition-all duration-200 peer-checked:bg-[var(--color-neon-blue)]"></div>
                      </div>
                      <div class="flex-1 min-w-0">
                        <p class="truncate text-sm font-medium" style="color: var(--color-snow);"><%= t.display_title %></p>
                        <p class="text-xs truncate" style="color: var(--color-mist);"><%= t.full_text&.truncate(50) %></p>
                      </div>
                    </label>
                  <% end %>
                </div>
              </div>
            <% end %>

            <% if @translations.any? %>
              <div class="rounded-xl p-4" style="background: var(--color-obsidian); border: 1px solid var(--color-graphite);">
                <label class="flex items-center gap-2 text-sm font-medium mb-3" style="color: var(--color-cloud);">
                  <svg class="w-5 h-5" style="color: var(--color-neon-green);" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5h12M9 3v2m1.048 9.5A18.022 18.022 0 016.412 9m6.088 9h7M11 21l5-10 5 10M12.751 5C11.783 10.77 8.07 15.61 3 18.129"/>
                  </svg>
                  Из перевода
                </label>
                <div class="space-y-2 max-h-40 overflow-y-auto pr-2 custom-scrollbar">
                  <% @translations.each do |t| %>
                    <label class="group flex items-center gap-3 p-3 rounded-lg cursor-pointer transition-all duration-200 hover:bg-white/5"
                           style="border: 1px solid transparent;">
                      <input type="radio" name="video_builder[text_source]" value="translation_<%= t.id %>"
                             class="sr-only peer">
                      <div class="w-4 h-4 rounded-full border-2 flex items-center justify-center transition-all duration-200 peer-checked:border-[var(--color-neon-green)]"
                           style="border-color: var(--color-graphite);">
                        <div class="w-2 h-2 rounded-full transition-all duration-200 peer-checked:bg-[var(--color-neon-green)]"></div>
                      </div>
                      <div class="flex-1 min-w-0">
                        <p class="truncate text-sm font-medium" style="color: var(--color-snow);"><%= t.target_language_name %></p>
                        <p class="text-xs truncate" style="color: var(--color-mist);"><%= t.translated_text&.truncate(50) %></p>
                      </div>
                    </label>
                  <% end %>
                </div>
              </div>
            <% end %>
          </div>
        <% end %>

        <!-- Или загрузить файл -->
        <div class="relative">
          <div class="absolute inset-0 flex items-center">
            <div class="w-full" style="border-top: 1px solid var(--color-graphite);"></div>
          </div>
          <div class="relative flex justify-center">
            <span class="px-4 text-sm" style="background: var(--color-abyss); color: var(--color-mist);">или загрузите файл</span>
          </div>
        </div>

        <div class="rounded-xl p-6 text-center transition-all duration-200 hover:border-[var(--color-neon-purple)]"
             style="border: 2px dashed var(--color-graphite); background: var(--color-obsidian);">
          <%= f.file_field :source_audio, accept: "audio/*",
              class: "sr-only", id: "source_audio" %>
          <label for="source_audio" class="cursor-pointer block">
            <svg class="w-12 h-12 mx-auto mb-3" style="color: var(--color-mist);" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19V6l12-3v13M9 19c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zm12-3c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zM9 10l12-3"/>
            </svg>
            <p class="font-medium mb-1" style="color: var(--color-snow);">Загрузить аудио</p>
            <p class="text-sm" style="color: var(--color-mist);">MP3, WAV, M4A до 100MB</p>
          </label>
        </div>
      </div>

      <!-- Шаг 3: Видео -->
      <div class="space-y-5">
        <div class="flex items-center gap-3 pb-4 border-b" style="border-color: var(--color-graphite);">
          <span class="w-9 h-9 rounded-lg flex items-center justify-center text-sm font-bold"
                style="background: linear-gradient(135deg, var(--color-neon-blue) 0%, #4df4ff 100%); color: var(--color-void);">3</span>
          <div>
            <h3 class="font-display text-base font-semibold" style="color: var(--color-snow);">Загрузите видео</h3>
            <p class="text-xs" style="color: var(--color-mist);">Фоновый ролик для видео</p>
          </div>
        </div>

        <div class="rounded-xl p-6 text-center transition-all duration-200 hover:border-[var(--color-neon-blue)]"
             style="border: 2px dashed var(--color-graphite); background: var(--color-obsidian);">
          <%= f.file_field :source_video, accept: "video/*", required: true,
              class: "sr-only", id: "source_video" %>
          <label for="source_video" class="cursor-pointer block">
            <svg class="w-12 h-12 mx-auto mb-3" style="color: var(--color-mist);" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"/>
            </svg>
            <p class="font-medium mb-1" style="color: var(--color-snow);">Загрузить видео</p>
            <p class="text-sm" style="color: var(--color-mist);">MP4, MOV, WebM до 500MB</p>
          </label>
        </div>

        <div>
          <label class="block text-sm font-medium mb-3" style="color: var(--color-cloud);">Режим обработки</label>
          <div class="grid grid-cols-2 gap-4">
            <% VideoBuilder::VIDEO_MODES.each_with_index do |(label, value), index| %>
              <label class="cursor-pointer group">
                <%= f.radio_button :video_mode, value, class: "sr-only peer" %>
                <div class="p-4 rounded-xl border-2 transition-all duration-200 peer-checked:border-[var(--color-neon-blue)] peer-checked:bg-[rgba(0,212,255,0.1)] group-hover:border-[var(--color-slate)]"
                     style="border-color: var(--color-graphite); background: var(--color-obsidian);">
                  <div class="flex items-center gap-3 mb-2">
                    <div class="w-8 h-8 rounded-lg flex items-center justify-center"
                         style="background: rgba(0, 212, 255, 0.1);">
                      <% if value == "trim" %>
                        <svg class="w-5 h-5" style="color: var(--color-neon-blue);" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14.121 14.121L19 19m-7-7l7-7m-7 7l-2.879 2.879M12 12L9.121 9.121m0 5.758a3 3 0 10-4.243 4.243 3 3 0 004.243-4.243zm0-5.758a3 3 0 10-4.243-4.243 3 3 0 004.243 4.243z"/>
                        </svg>
                      <% else %>
                        <svg class="w-5 h-5" style="color: var(--color-neon-blue);" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"/>
                        </svg>
                      <% end %>
                    </div>
                    <p class="font-semibold" style="color: var(--color-snow);"><%= label %></p>
                  </div>
                  <p class="text-xs" style="color: var(--color-mist);">
                    <%= value == "trim" ? "Обрезает длинное видео под длину аудио" : "Повторяет короткое видео до конца аудио" %>
                  </p>
                </div>
              </label>
            <% end %>
          </div>
        </div>
      </div>

      <!-- Шаг 4: Субтитры -->
      <div class="space-y-5">
        <div class="flex items-center gap-3 pb-4 border-b" style="border-color: var(--color-graphite);">
          <span class="w-9 h-9 rounded-lg flex items-center justify-center text-sm font-bold"
                style="background: linear-gradient(135deg, var(--color-neon-green) 0%, #4fffb0 100%); color: var(--color-void);">4</span>
          <div>
            <h3 class="font-display text-base font-semibold" style="color: var(--color-snow);">Субтитры</h3>
            <p class="text-xs" style="color: var(--color-mist);">Опционально</p>
          </div>
        </div>

        <div class="rounded-xl p-4" style="background: var(--color-obsidian); border: 1px solid var(--color-graphite);">
          <label class="flex items-center justify-between cursor-pointer">
            <div class="flex items-center gap-3">
              <svg class="w-6 h-6" style="color: var(--color-neon-green);" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 8h10M7 12h4m1 8l-4-4H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-3l-4 4z"/>
              </svg>
              <div>
                <p class="font-medium" style="color: var(--color-snow);">Включить субтитры</p>
                <p class="text-sm" style="color: var(--color-mist);">Вшить субтитры в видео</p>
              </div>
            </div>
            <div class="relative">
              <%= f.check_box :subtitles_enabled, class: "sr-only peer", id: "subtitles_enabled",
                  data: { action: "change->video-builder-form#toggleSubtitles" } %>
              <div class="w-14 h-7 rounded-full peer transition-all duration-300 peer-checked:bg-[var(--color-neon-green)]"
                   style="background: var(--color-slate);"></div>
              <div class="absolute top-[2px] left-[2px] w-6 h-6 rounded-full transition-all duration-300 peer-checked:translate-x-7"
                   style="background: var(--color-snow);"></div>
            </div>
          </label>
        </div>

        <div id="subtitles-options" class="space-y-4 hidden" data-video-builder-form-target="subtitlesOptions">
          <div class="rounded-xl p-6 transition-all duration-200 hover:border-[var(--color-neon-green)]"
               style="border: 2px dashed var(--color-graphite); background: var(--color-obsidian);">
            <%= f.file_field :subtitles_file, accept: ".srt,.vtt",
                class: "sr-only", id: "subtitles_file" %>
            <label for="subtitles_file" class="cursor-pointer block text-center">
              <svg class="w-10 h-10 mx-auto mb-3" style="color: var(--color-mist);" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/>
              </svg>
              <p class="font-medium mb-1" style="color: var(--color-snow);">Загрузить субтитры</p>
              <p class="text-sm" style="color: var(--color-mist);">SRT или VTT</p>
            </label>
          </div>

          <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
            <div>
              <label class="block text-sm font-medium mb-2" style="color: var(--color-cloud);">Стиль</label>
              <div class="relative">
                <%= f.select :subtitles_style,
                    VideoBuilder::SUBTITLE_STYLES,
                    {},
                    { class: "w-full pl-4 pr-10 py-3 rounded-xl appearance-none cursor-pointer transition-all duration-200 focus:outline-none focus:ring-2",
                      style: "background: var(--color-obsidian); border: 1px solid var(--color-graphite); color: var(--color-snow); --tw-ring-color: var(--color-neon-green);" } %>
                <div class="absolute inset-y-0 right-0 pr-4 flex items-center pointer-events-none">
                  <svg class="w-5 h-5" style="color: var(--color-mist);" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/>
                  </svg>
                </div>
              </div>
            </div>

            <div>
              <label class="block text-sm font-medium mb-2" style="color: var(--color-cloud);">Позиция</label>
              <div class="relative">
                <%= f.select :subtitles_position,
                    VideoBuilder::SUBTITLE_POSITIONS,
                    {},
                    { class: "w-full pl-4 pr-10 py-3 rounded-xl appearance-none cursor-pointer transition-all duration-200 focus:outline-none focus:ring-2",
                      style: "background: var(--color-obsidian); border: 1px solid var(--color-graphite); color: var(--color-snow); --tw-ring-color: var(--color-neon-green);" } %>
                <div class="absolute inset-y-0 right-0 pr-4 flex items-center pointer-events-none">
                  <svg class="w-5 h-5" style="color: var(--color-mist);" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/>
                  </svg>
                </div>
              </div>
            </div>

            <div>
              <label class="block text-sm font-medium mb-2" style="color: var(--color-cloud);">Размер шрифта</label>
              <div class="relative">
                <div class="absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none">
                  <span class="text-sm" style="color: var(--color-mist);">px</span>
                </div>
                <%= f.number_field :subtitles_font_size, min: 12, max: 72, value: 24,
                    class: "w-full pl-12 pr-4 py-3 rounded-xl transition-all duration-200 focus:outline-none focus:ring-2",
                    style: "background: var(--color-obsidian); border: 1px solid var(--color-graphite); color: var(--color-snow); --tw-ring-color: var(--color-neon-green);" %>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Кнопки -->
      <div class="flex items-center justify-between pt-5 border-t" style="border-color: var(--color-graphite);">
        <%= link_to video_builders_path,
            class: "flex items-center gap-2 px-5 py-2.5 rounded-xl font-medium text-sm transition-all duration-200 hover:bg-white/10",
            style: "color: var(--color-mist);" do %>
          <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18"/>
          </svg>
          Отмена
        <% end %>

        <%= f.submit "Создать видео",
            class: "flex items-center gap-2 px-6 py-2.5 rounded-xl font-semibold text-sm cursor-pointer transition-all duration-300 hover:scale-105 hover:shadow-lg",
            style: "background: linear-gradient(135deg, var(--color-coral) 0%, #ff8c8c 100%); color: var(--color-void); box-shadow: 0 8px 24px rgba(255, 107, 107, 0.25);" %>
      </div>
    <% end %>
  </div>
</div>

<style>
  .custom-scrollbar::-webkit-scrollbar {
    width: 6px;
  }
  .custom-scrollbar::-webkit-scrollbar-track {
    background: var(--color-graphite);
    border-radius: 3px;
  }
  .custom-scrollbar::-webkit-scrollbar-thumb {
    background: var(--color-slate);
    border-radius: 3px;
  }
  .custom-scrollbar::-webkit-scrollbar-thumb:hover {
    background: var(--color-mist);
  }

  /* Custom checkbox styling */
  input[type="checkbox"]:checked + div {
    border-color: var(--color-neon-purple) !important;
    background: var(--color-neon-purple) !important;
  }
  input[type="checkbox"]:checked + div svg {
    opacity: 1 !important;
  }

  /* Custom radio styling */
  input[type="radio"]:checked + div {
    border-color: inherit !important;
  }
  input[type="radio"]:checked + div > div {
    background: inherit !important;
  }
</style>
