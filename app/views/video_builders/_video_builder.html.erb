<%= link_to video_builder_path(video_builder),
    class: "block glass-card rounded-2xl overflow-hidden hover:bg-white/5 transition-all duration-200 group",
    id: dom_id(video_builder),
    data: video_builder.processing? ? { controller: "polling", polling_url_value: video_builder_path(video_builder, format: :json), polling_interval_value: 2000 } : {} do %>

  <!-- Thumbnail -->
  <div class="aspect-video w-full flex items-center justify-center relative"
       style="background: var(--color-graphite);">
    <% if video_builder.thumbnail.attached? %>
      <%= image_tag video_builder.thumbnail, class: "w-full h-full object-cover" %>
    <% else %>
      <svg class="w-12 h-12" style="color: var(--color-mist);" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"/>
      </svg>
    <% end %>

    <!-- Status badge overlay -->
    <div class="absolute top-2 right-2">
      <% case video_builder.status %>
      <% when "draft" %>
        <span class="inline-flex items-center px-2 py-1 rounded-lg text-xs font-medium backdrop-blur-sm"
              style="background: rgba(0,0,0,0.6); color: var(--color-mist);">
          Черновик
        </span>
      <% when "processing" %>
        <span class="inline-flex items-center px-2 py-1 rounded-lg text-xs font-medium backdrop-blur-sm"
              style="background: rgba(0,0,0,0.6); color: var(--color-neon-blue);">
          <svg class="w-3 h-3 mr-1 animate-spin" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"/>
          </svg>
          <%= video_builder.progress %>%
        </span>
      <% when "completed" %>
        <span class="inline-flex items-center px-2 py-1 rounded-lg text-xs font-medium backdrop-blur-sm"
              style="background: rgba(0,0,0,0.6); color: var(--color-neon-green);">
          Готово
        </span>
      <% when "failed" %>
        <span class="inline-flex items-center px-2 py-1 rounded-lg text-xs font-medium backdrop-blur-sm"
              style="background: rgba(0,0,0,0.6); color: var(--color-coral);">
          Ошибка
        </span>
      <% end %>
    </div>

    <!-- Duration overlay -->
    <% if video_builder.output_duration %>
      <div class="absolute bottom-2 right-2">
        <span class="px-2 py-1 rounded text-xs font-medium backdrop-blur-sm"
              style="background: rgba(0,0,0,0.7); color: white;">
          <%= video_builder.duration_formatted %>
        </span>
      </div>
    <% end %>

    <!-- YouTube badge -->
    <% if video_builder.youtube_published? %>
      <div class="absolute bottom-2 left-2">
        <span class="flex items-center gap-1 px-2 py-1 rounded text-xs font-medium"
              style="background: #FF0000; color: white;">
          <svg class="w-3 h-3" fill="currentColor" viewBox="0 0 24 24">
            <path d="M23.498 6.186a3.016 3.016 0 0 0-2.122-2.136C19.505 3.545 12 3.545 12 3.545s-7.505 0-9.377.505A3.017 3.017 0 0 0 .502 6.186C0 8.07 0 12 0 12s0 3.93.502 5.814a3.016 3.016 0 0 0 2.122 2.136c1.871.505 9.376.505 9.376.505s7.505 0 9.377-.505a3.015 3.015 0 0 0 2.122-2.136C24 15.93 24 12 24 12s0-3.93-.502-5.814z"/>
          </svg>
        </span>
      </div>
    <% end %>
  </div>

  <!-- Content -->
  <div class="p-4">
    <h3 class="font-semibold truncate" style="color: var(--color-snow);"><%= video_builder.display_title %></h3>

    <div class="flex items-center gap-2 mt-2 text-xs" style="color: var(--color-mist);">
      <% if video_builder.project.present? %>
        <span class="flex items-center gap-1">
          <span class="w-2 h-2 rounded-full" style="background: <%= video_builder.project.display_color %>;"></span>
          <%= video_builder.project.name %>
        </span>
        <span>•</span>
      <% end %>
      <span><%= video_builder.video_mode_display %></span>
      <span>•</span>
      <span><%= time_ago_in_words(video_builder.created_at) %></span>
    </div>
  </div>
<% end %>
